<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Ridebazzar</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3b82f6',
            secondary: '#f59e0b',
          },
          borderRadius: {
            'none': '0px',
            'sm': '4px',
            DEFAULT: '8px',
            'md': '12px',
            'lg': '16px',
            'xl': '20px',
            '2xl': '24px',
            '3xl': '32px',
            'full': '9999px',
            'button': '8px'
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f8fafc;
    }
    .progress-bar {
      width: 100%;
      height: 4px;
      background-color: #e5e7eb;
      border-radius: 2px;
      margin: 1rem 0;
    }
    .progress-bar-fill {
      height: 100%;
      background-color: #3b82f6;
      border-radius: 2px;
      width: 25%;
      transition: width 0.3s ease;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Navigation Bar -->
  <nav class="bg-white/90 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <a href="wpproj.html" class="font-['Pacifico'] text-primary text-2xl hover:text-primary/90 transition-colors">Ridebazzar</a>
        </div>
        <div class="flex items-center space-x-6">
          <a href="cart.html" class="relative text-gray-700 hover:text-primary transition-colors">
            <i class="ri-shopping-cart-line text-xl"></i>
            <span id="cartCount" class="absolute -top-2 -right-2 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
          </a>
          <a href="login.html" class="bg-primary text-white px-4 py-2 rounded-button whitespace-nowrap hover:bg-primary/90 transition-colors font-medium">Login / Sign Up</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Checkout Progress -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-900">Checkout Progress</h2>
        <span class="text-sm text-primary font-medium">Step 1 of 3</span>
      </div>
      <div class="progress-bar">
        <div class="progress-bar-fill"></div>
      </div>
      <div class="flex justify-between text-sm mt-2">
        <span class="font-medium text-primary">Order Details</span>
        <span class="text-gray-500">Confirmation</span>
        <span class="text-gray-500">Complete</span>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Main Content -->
      <div class="lg:col-span-2">
        <!-- Billing Information -->
        <div id="billingSection" class="bg-white rounded-lg shadow-sm p-6 mb-6">
          <h2 class="text-xl font-bold mb-6">Billing Information</h2>
          <form class="space-y-6" id="billingForm">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
              <input type="email" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
              <input type="tel" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
            </div>
            <button type="button" id="billingNext" class="w-full bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition-colors font-medium">Next</button>
          </form>
        </div>

        <!-- Shipping Address -->
        <div id="shippingSection" class="bg-white rounded-lg shadow-sm p-6 mb-6 hidden">
          <h2 class="text-xl font-bold mb-6">Shipping Address</h2>
          <form class="space-y-6" id="shippingForm">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
              <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">State</label>
                <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Postal Code</label>
                <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                <select class="w-full px-4 py-2 border border-gray-300 rounded-button" required>
                  <option value="">Select Country</option>
                  <option value="IN">India</option>
                  <option value="US">United States</option>
                  <option value="UK">United Kingdom</option>
                </select>
              </div>
            </div>
            <div class="flex gap-4">
              <button type="button" class="backToStep1 w-1/2 bg-gray-100 text-gray-700 py-3 rounded-button hover:bg-gray-200 transition-colors font-medium">Back</button>
              <button type="button" id="shippingNext" class="w-1/2 bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition-colors font-medium">Next</button>
            </div>
          </form>
        </div>

        <!-- Payment Method -->
        <div id="paymentSection" class="bg-white rounded-lg shadow-sm p-6 mb-6 hidden">
          <h2 class="text-xl font-bold mb-6">Payment Method</h2>
          <div class="space-y-4">
            <div class="flex items-center p-4 border border-gray-300 rounded-button">
              <input type="radio" name="payment" id="cod" class="mr-4" checked>
              <label for="cod" class="flex-1">
                <div class="font-medium">Cash on Delivery</div>
                <div class="text-sm text-gray-500 mt-1">Pay when you receive your order</div>
              </label>
            </div>
            <div class="flex gap-4 mt-6">
              <button type="button" class="backToStep2 w-1/2 bg-gray-100 text-gray-700 py-3 rounded-button hover:bg-gray-200 transition-colors font-medium">Back</button>
              <button type="button" id="placeOrderBtn" class="w-1/2 bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition-colors font-medium flex items-center justify-center gap-2">
                <i class="ri-shield-check-line"></i>
                Place Order
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="lg:col-span-1">
        <div class="bg-white rounded-lg shadow-sm p-6 sticky top-8">
          <h2 class="text-xl font-bold mb-6">Order Summary</h2>
          <div class="space-y-4 mb-6">
            <div class="flex justify-between">
              <span class="text-gray-600">Subtotal</span>
              <span class="font-medium subtotal">₹0.00</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Shipping</span>
              <span class="font-medium shipping">Free</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Tax (18%)</span>
              <span class="font-medium tax">₹0.00</span>
            </div>
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between">
                <span class="font-bold">Total</span>
                <span class="font-bold text-primary total">₹0.00</span>
              </div>
            </div>
          </div>
          <button id="placeOrderBtn" class="w-full bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition-colors font-medium flex items-center justify-center gap-2">
            <i class="ri-shield-check-line"></i>
            Place Order Securely
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 py-6 mt-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-sm text-gray-500">© 2025 Ridebazzar. All rights reserved.</p>
        <div class="flex space-x-6">
          <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Privacy Policy</a>
          <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Terms of Service</a>
          <a href="#" class="text-sm text-gray-500 hover:text-gray-700">Help Center</a>
        </div>
      </div>
    </div>
  </footer>

  <script src="products.js"></script>
  <script src="cart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Elements
      const progressBar = document.querySelector('.progress-bar-fill');
      const stepText = document.querySelector('.text-primary.font-medium + span');
      const billingSection = document.getElementById('billingSection');
      const shippingSection = document.getElementById('shippingSection');
      const paymentSection = document.getElementById('paymentSection');
      const billingNext = document.getElementById('billingNext');
      const shippingNext = document.getElementById('shippingNext');
      const backToStep1Btns = document.querySelectorAll('.backToStep1');
      const backToStep2Btns = document.querySelectorAll('.backToStep2');
      const placeOrderBtn = document.getElementById('placeOrderBtn');

      // Update progress function
      function updateProgress(step) {
        const progress = (step / 3) * 100;
        progressBar.style.width = `${progress}%`;
        document.querySelector('span.text-sm.text-primary.font-medium').textContent = `Step ${step} of 3`;
        
        // Update step labels
        const steps = ['Order Details', 'Shipping', 'Payment'];
        const stepLabels = document.querySelectorAll('.flex.justify-between.text-sm.mt-2 span');
        stepLabels.forEach((label, index) => {
          if (index < step) {
            label.classList.remove('text-gray-500');
            label.classList.add('text-primary', 'font-medium');
          } else if (index === step - 1) {
            label.classList.remove('text-gray-500');
            label.classList.add('text-primary', 'font-medium');
          } else {
            label.classList.remove('text-primary', 'font-medium');
            label.classList.add('text-gray-500');
          }
        });
      }

      // Validate form function
      function validateForm(formId) {
        const form = document.getElementById(formId);
        const inputs = form.querySelectorAll('input[required], select[required]');
        let isValid = true;

        inputs.forEach(input => {
          if (!input.value.trim()) {
            isValid = false;
            input.classList.add('border-red-500');
          } else {
            input.classList.remove('border-red-500');
          }
        });

        return isValid;
      }

      // Event Listeners
      billingNext.addEventListener('click', () => {
        if (validateForm('billingForm')) {
          billingSection.classList.add('hidden');
          shippingSection.classList.remove('hidden');
          updateProgress(2);
        } else {
          alert('Please fill in all required fields.');
        }
      });

      shippingNext.addEventListener('click', () => {
        if (validateForm('shippingForm')) {
          shippingSection.classList.add('hidden');
          paymentSection.classList.remove('hidden');
          updateProgress(3);
        } else {
          alert('Please fill in all required fields.');
        }
      });

      backToStep1Btns.forEach(btn => {
        btn.addEventListener('click', () => {
          shippingSection.classList.add('hidden');
          billingSection.classList.remove('hidden');
          updateProgress(1);
        });
      });

      backToStep2Btns.forEach(btn => {
        btn.addEventListener('click', () => {
          paymentSection.classList.add('hidden');
          shippingSection.classList.remove('hidden');
          updateProgress(2);
        });
      });

      // Initialize progress
      updateProgress(1);

      // Update cart count
      const cartCount = document.getElementById('cartCount');
      const subtotalElement = document.querySelector('.subtotal');
      const taxElement = document.querySelector('.tax');
      const totalElement = document.querySelector('.total');

      function updateOrderSummary() {
        const subtotal = cartDB.getTotalPrice();
        const shipping = 0; // Free shipping
        const tax = subtotal * 0.18; // 18% tax
        const total = subtotal + shipping + tax;

        subtotalElement.textContent = `₹${subtotal.toLocaleString()}`;
        taxElement.textContent = `₹${tax.toLocaleString()}`;
        totalElement.textContent = `₹${total.toLocaleString()}`;

        // Update cart count
        if (cartCount) {
          const count = cartDB.getTotalItems();
          cartCount.textContent = count;
          if (count === 0) {
            cartCount.classList.add('hidden');
            // Redirect to cart page if cart is empty
            window.location.href = 'cart.html';
          } else {
            cartCount.classList.remove('hidden');
          }
        }
      }

      // Initial update
      updateOrderSummary();

      // Handle place order button click
      placeOrderBtn.addEventListener('click', function() {
        const formElements = document.querySelectorAll('input[required], select[required]');
        let isValid = true;

        formElements.forEach(element => {
          if (!element.value.trim()) {
            isValid = false;
            element.classList.add('border-red-500');
          } else {
            element.classList.remove('border-red-500');
          }
        });

        if (isValid) {
          // Clear cart after successful order
          cartDB.clearCart();
          // Redirect to thank you page
          window.location.href = 'thankyou.html';
        } else {
          alert('Please fill in all required fields.');
        }
      });
    });
  </script>
</body>
</html> 