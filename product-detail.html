<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Ridebazzar</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#f59e0b',
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .product-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
        }
        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .thumbnail.active {
            border: 2px solid #3b82f6;
        }
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .spec-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Navigation Bar -->
    <nav class="bg-white/90 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="wpproj.html" class="font-['Pacifico'] text-primary text-2xl hover:text-primary/90 transition-colors">Ridebazzar</a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <div class="flex items-center space-x-6">
                        <a href="cart.html" class="relative text-gray-700 hover:text-primary transition-colors">
                            <i class="ri-shopping-cart-line text-xl"></i>
                            <span id="cartCount" class="absolute -top-2 -right-2 bg-primary text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">0</span>
                        </a>
                        <!-- <a href="login.html" class="bg-primary text-white px-4 py-2 rounded-button whitespace-nowrap hover:bg-primary/90 transition-colors font-medium">Login / Sign Up</a> -->
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Product Detail -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Product Image -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <div class="aspect-w-1 aspect-h-1 w-full mb-4">
                    <img id="productImage" src="" alt="Product" class="w-full h-full object-cover rounded-lg">
                </div>
                <div class="flex gap-4 overflow-x-auto pb-2">
                    <img id="thumbnail1" class="thumbnail" src="" alt="Thumbnail 1">
                    <img id="thumbnail2" class="thumbnail" src="" alt="Thumbnail 2">
                    <img id="thumbnail3" class="thumbnail" src="" alt="Thumbnail 3">
                </div>
            </div>

            <!-- Product Info -->
            <div class="bg-white rounded-lg shadow-sm p-6">
                <h1 id="productName" class="text-2xl font-bold text-gray-900 mb-2"></h1>
                <div class="flex items-center gap-4 mb-4">
                    <span id="productCategory" class="text-sm text-gray-500 capitalize"></span>
                    <span class="text-sm text-gray-500">•</span>
                    <span id="productCondition" class="text-sm text-gray-500 capitalize"></span>
                </div>
                <div class="flex items-center mb-4">
                    <div class="flex items-center text-yellow-400 mr-4">
                        <i class="ri-star-fill"></i>
                        <span id="sellerRating" class="ml-1 text-gray-600"></span>
                    </div>
                    <span id="sellerName" class="text-gray-600"></span>
                </div>
                <div class="text-3xl font-bold text-primary mb-6">
                    ₹<span id="productPrice"></span>
                </div>
                
                <div class="mb-6">
                    <h2 class="text-lg font-semibold mb-2">Key Features</h2>
                    <ul id="productFeatures" class="list-disc list-inside text-gray-600 space-y-2">
                    </ul>
                </div>

                <div class="flex gap-4 mb-8">
                    <button id="addToCartBtn" class="flex-1 bg-gray-100 text-gray-900 py-3 rounded-button hover:bg-gray-200 transition-colors font-medium">
                        Add to Cart
                    </button>
                    <button id="buyNowBtn" class="flex-1 bg-primary text-white py-3 rounded-button hover:bg-primary/90 transition-colors font-medium">
                        Buy Now
                    </button>
                </div>

                <!-- Specifications -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold mb-4">Specifications</h2>
                    <div id="productSpecs" class="space-y-2">
                    </div>
                </div>

                <!-- Seller Information -->
                <div class="border-t pt-6">
                    <h2 class="text-lg font-semibold mb-4">Seller Information</h2>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center">
                            <i class="ri-user-line text-xl text-gray-500"></i>
                        </div>
                        <div>
                            <h3 id="sellerNameFull" class="font-medium"></h3>
                            <p class="text-sm text-gray-500">Member since <span id="sellerJoinDate"></span></p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 text-sm text-gray-600">
                        <div class="flex items-center">
                            <i class="ri-star-fill text-yellow-400 mr-1"></i>
                            <span id="sellerRatingFull"></span> Rating
                        </div>
                        <div class="flex items-center">
                            <i class="ri-checkbox-circle-fill text-green-500 mr-1"></i>
                            <span id="sellerItemsSold"></span> Items Sold
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Description -->
        <div class="mt-8 bg-white rounded-lg shadow-sm p-6">
            <h2 class="text-xl font-semibold mb-4">Detailed Description</h2>
            <div id="detailedDescription" class="prose max-w-none">
            </div>
        </div>
    </div>

    <script src="cart.js"></script>
    <script src="products.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cart from localStorage
            cartDB.loadFromLocalStorage();

            // Get product ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = parseInt(urlParams.get('id'));

            // Get product details from productsDB
            const product = productsDB.products.find(p => p.id === productId);
            
            if (!product) {
                window.location.href = 'buyitem.html';
                return;
            }

            // Update product images
            document.getElementById('productImage').src = product.images[0];
            document.getElementById('thumbnail1').src = product.images[0];
            document.getElementById('thumbnail2').src = product.images[1] || product.images[0];
            document.getElementById('thumbnail3').src = product.images[2] || product.images[0];

            // Update product details
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productCategory').textContent = product.category;
            document.getElementById('productCondition').textContent = product.condition;
            document.getElementById('productPrice').textContent = product.price.toLocaleString();
            document.getElementById('sellerName').textContent = product.seller.name;
            document.getElementById('sellerRating').textContent = product.seller.rating;

            // Update features
            const featuresList = document.getElementById('productFeatures');
            if (product.features) {
                product.features.forEach(feature => {
                    const li = document.createElement('li');
                    li.textContent = feature;
                    featuresList.appendChild(li);
                });
            }

            // Update specifications
            const specsContainer = document.getElementById('productSpecs');
            if (product.specifications) {
                Object.entries(product.specifications).forEach(([key, value]) => {
                    const div = document.createElement('div');
                    div.className = 'spec-item';
                    div.innerHTML = `
                        <span class="text-gray-600">${key}</span>
                        <span class="text-gray-900 font-medium">${value}</span>
                    `;
                    specsContainer.appendChild(div);
                });
            }

            // Update seller information
            document.getElementById('sellerNameFull').textContent = product.seller.name;
            document.getElementById('sellerJoinDate').textContent = product.seller.joinDate || 'N/A';
            document.getElementById('sellerRatingFull').textContent = product.seller.rating;
            document.getElementById('sellerItemsSold').textContent = product.seller.itemsSold || 'N/A';

            // Update detailed description
            if (product.detailedDescription) {
                document.getElementById('detailedDescription').innerHTML = product.detailedDescription;
            } else {
                document.getElementById('detailedDescription').innerHTML = product.description;
            }

            // Update cart count in navigation
            function updateCartCount() {
                const cartCount = document.getElementById('cartCount');
                const count = cartDB.getTotalItems();
                cartCount.textContent = count;
                if (count === 0) {
                    cartCount.classList.add('hidden');
                } else {
                    cartCount.classList.remove('hidden');
                }
            }

            // Initial cart count update
            updateCartCount();

            // Add to Cart button
            const addToCartBtn = document.getElementById('addToCartBtn');
            addToCartBtn.addEventListener('click', function() {
                try {
                    // Add to cart
                    cartDB.addItem(product);
                    
                    // Update cart count
                    updateCartCount();

                    // Show success message
                    addToCartBtn.textContent = '✓ Added to Cart';
                    addToCartBtn.classList.remove('bg-gray-100', 'text-gray-900', 'hover:bg-gray-200');
                    addToCartBtn.classList.add('bg-green-500', 'text-white');
                    addToCartBtn.disabled = true;

                    // Reset button after 2 seconds
                    setTimeout(() => {
                        addToCartBtn.textContent = 'Add to Cart';
                        addToCartBtn.classList.remove('bg-green-500', 'text-white');
                        addToCartBtn.classList.add('bg-gray-100', 'text-gray-900', 'hover:bg-gray-200');
                        addToCartBtn.disabled = false;
                    }, 2000);

                    // Show success notification
                    const notification = document.createElement('div');
                    notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                    notification.textContent = 'Item added to cart successfully!';
                    document.body.appendChild(notification);

                    // Remove notification after 3 seconds
                    setTimeout(() => {
                        notification.remove();
                    }, 3000);

                } catch (error) {
                    console.error('Error adding item to cart:', error);
                    alert('Failed to add item to cart. Please try again.');
                }
            });

            // Buy Now button
            document.getElementById('buyNowBtn').addEventListener('click', function() {
                cartDB.addItem(product);
                window.location.href = 'cart.html';
            });

            // Thumbnail click handlers
            const thumbnails = document.querySelectorAll('.thumbnail');
            const mainImage = document.getElementById('productImage');

            thumbnails.forEach((thumb, index) => {
                thumb.addEventListener('click', function() {
                    // Update main image
                    mainImage.src = this.src;
                    
                    // Update active state
                    thumbnails.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });

                // Set initial active state for first thumbnail
                if (index === 0) {
                    thumb.classList.add('active');
                }
            });

            // Add hover effect for thumbnails
            thumbnails.forEach(thumb => {
                thumb.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'transform 0.2s ease';
                });

                thumb.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html> 